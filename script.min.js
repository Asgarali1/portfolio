document.addEventListener("DOMContentLoaded",function(){initThemeSwitcher();initNavbar();initSmoothScrolling();initScrollAnimations();initTypingEffect();initSkillsAnimation();initProjectsFilter();initBlogFilter();initContactForm()});function initThemeSwitcher(){const e=document.getElementById("themeToggle"),t=document.getElementById("themeIcon"),n=document.body,o=localStorage.getItem("theme")||"light";function i(e){n.setAttribute("data-theme",e),localStorage.setItem("theme",e),t.style.transform="rotate(180deg)",setTimeout(()=>{t.className="dark"===e?"fas fa-sun":"fas fa-moon",t.style.transform="rotate(0deg)"},150),function(e){let t=document.querySelector('meta[name="theme-color"]');t||(t=document.createElement("meta"),t.name="theme-color",document.head.appendChild(t)),t.content="dark"===e?"#0f172a":"#6366f1"}(e);const o=new CustomEvent("themeChanged",{detail:{theme:e}});document.dispatchEvent(o)}i(o),e.addEventListener("click",function(){const e=n.getAttribute("data-theme")||"light",t="light"===e?"dark":"light";i(t),this.style.transform="scale(0.9)",setTimeout(()=>{this.style.transform="scale(1)"},150)}),window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(e){localStorage.getItem("theme")||i(e.matches?"dark":"light")}),e.addEventListener("keydown",function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),this.click())})}function initNavbar(){const e=document.querySelector(".navbar"),t=document.querySelectorAll(".nav-link");window.addEventListener("scroll",function(){window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled"),updateActiveNavLink()}),t.forEach(e=>{e.addEventListener("click",function(){const e=document.querySelector(".navbar-collapse");if(e.classList.contains("show")){new bootstrap.Collapse(e).hide()}})})}function updateActiveNavLink(){const e=document.querySelectorAll("section[id]"),t=document.querySelectorAll(".nav-link");let n="";e.forEach(e=>{const t=e.offsetTop;window.scrollY>=t-200&&(n=e.getAttribute("id"))}),t.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${n}`&&e.classList.add("active")})}function initSmoothScrolling(){document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.getAttribute("href"),n=document.querySelector(t);if(n){const e=n.offsetTop-80;window.scrollTo({top:e,behavior:"smooth"})}})})}function initScrollAnimations(){const e=document.querySelectorAll(".skill-category, .education-card, .project-card, .about-content, .about-image, .certification-card"),t=new IntersectionObserver(function(e){e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)",e.target.style.transition="all 0.6s ease-out")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});e.forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",t.observe(e)})}function initTypingEffect(){const e=document.querySelector(".hero-subtitle"),t="Aspiring MERN Stack Developer";let n=0;function o(){if(n<t.length)e.textContent+=t.charAt(n),n++,setTimeout(o,100);else{e.innerHTML+='<span class="cursor">|</span>';const t=document.createElement("style");t.textContent="\n                .cursor {\n                    animation: blink 1s infinite;\n                }\n                @keyframes blink {\n                    0%, 50% { opacity: 1; }\n                    51%, 100% { opacity: 0; }\n                }\n            ",document.head.appendChild(t)}}e.textContent="",setTimeout(o,1e3)}function initSkillsAnimation(){const e=document.querySelectorAll(".skill-category"),t=document.querySelectorAll(".skill-progress"),n=new IntersectionObserver(function(e){e.forEach((e,t)=>{e.isIntersecting&&setTimeout(()=>{e.target.style.opacity="1",e.target.style.transform="translateY(0) scale(1)",e.target.style.transition="all 0.6s ease-out";e.target.querySelectorAll(".skill-progress").forEach((e,t)=>{setTimeout(()=>{const t=e.getAttribute("data-width");e.style.width=t},200*t)})},200*t)})},{threshold:.1});e.forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px) scale(0.9)",n.observe(e)}),t.forEach(e=>{e.style.width="0%"})}function initProjectsFilter(){document.querySelectorAll(".project-card").forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-10px) scale(1.02)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0) scale(1)"})})}function initBlogFilter(){const e=document.querySelectorAll(".blog-filter-btn"),t=document.querySelectorAll(".blog-post"),n=document.querySelector(".newsletter-form");e.forEach(e=>{e.addEventListener("click",function(){const n=this.getAttribute("data-filter");e.forEach(e=>e.classList.remove("active")),this.classList.add("active"),t.forEach(e=>{const t=e.getAttribute("data-category");"all"===n||t===n?(e.style.display="block",e.style.opacity="0",e.style.transform="translateY(20px)",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateY(0)",e.style.transition="all 0.4s ease"},100)):(e.style.opacity="0",e.style.transform="translateY(-20px)",e.style.transition="all 0.3s ease",setTimeout(()=>{e.style.display="none"},300))}),this.style.transform="scale(0.95)",setTimeout(()=>{this.style.transform="scale(1)"},150)})}),n&&n.addEventListener("submit",function(e){e.preventDefault();const t=this.querySelector('input[type="email"]'),n=this.querySelector(".btn"),o=n.textContent,i=t.value.trim();if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i))return t.style.borderColor="#dc3545",void t.focus();n.disabled=!0,n.innerHTML='<i class="fas fa-spinner fa-spin"></i> Subscribing...',setTimeout(()=>{n.innerHTML='<i class="fas fa-check"></i> Subscribed!',n.style.background="#28a745",t.value="",t.style.borderColor="",setTimeout(()=>{n.disabled=!1,n.textContent=o,n.style.background=""},3e3)},1500)}),t.forEach(e=>{e.addEventListener("mouseenter",function(){this.style.transform="translateY(-8px)",this.style.transition="all 0.3s ease"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0)"})});const o=new IntersectionObserver(function(e){e.forEach(e=>{e.isIntersecting&&(e.target.style.opacity="1",e.target.style.transform="translateY(0)",e.target.style.transition="all 0.6s ease-out")})},{threshold:.1});t.forEach(e=>{e.style.opacity="0",e.style.transform="translateY(30px)",o.observe(e)}),document.querySelectorAll(".sidebar-widget").forEach((e,t)=>{e.style.opacity="0",e.style.transform="translateX(30px)",setTimeout(()=>{e.style.opacity="1",e.style.transform="translateX(0)",e.style.transition="all 0.6s ease-out"},200*t)})}function initContactForm(){const e=document.getElementById("contactForm"),t=document.getElementById("submitBtn"),n=t?.querySelector(".btn-text"),o=t?.querySelector(".btn-loading"),i=document.getElementById("successMessage"),r=document.getElementById("errorMessage");function s(){let t=!0;const n=e.querySelectorAll("[required]");n.forEach(e=>{const n=e.value.trim();e.classList.remove("is-valid","is-invalid"),n?"email"===e.type?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n)?e.classList.add("is-valid"):(e.classList.add("is-invalid"),t=!1):"firstName"===e.name||"lastName"===e.name?n.length<2?(e.classList.add("is-invalid"),t=!1):e.classList.add("is-valid"):"message"===e.name?n.length<10?(e.classList.add("is-invalid"),t=!1):e.classList.add("is-valid"):e.classList.add("is-valid"):(e.classList.add("is-invalid"),t=!1)});const o=document.getElementById("phone");return o&&o.value.trim()&&(/^[\+]?[1-9][\d]{0,15}$/.test(o.value.trim().replace(/[\s\-\(\)]/g,""))?o.classList.add("is-valid"):(o.classList.add("is-invalid"),t=!1)),t}document.querySelectorAll(".contact-link, .social-link-item").forEach(e=>{e.addEventListener("click",function(e){this.style.transform="scale(0.95)",setTimeout(()=>{this.style.transform="scale(1)"},150)})}),e&&(e.querySelectorAll("input, select, textarea").forEach(e=>{e.addEventListener("blur",function(){(this.hasAttribute("required")||this.value&&this.value.trim())&&s()}),e.addEventListener("input",function(){this.classList.contains("is-invalid")&&this.classList.remove("is-invalid")})}),e.addEventListener("submit",async function(a){a.preventDefault(),i.classList.add("d-none"),r.classList.add("d-none");if(!s()){const t=e.querySelector(".is-invalid");return void(t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),t.focus()))}t.disabled=!0,n.classList.add("d-none"),o.classList.remove("d-none");try{await new Promise((e,t)=>{setTimeout(()=>{Math.random()>.1?e({success:!0,message:"Message sent successfully"}):t(new Error("Simulated network error"))},2e3)}),i.classList.remove("d-none"),i.scrollIntoView({behavior:"smooth",block:"center"}),e.reset(),e.querySelectorAll("input, select, textarea").forEach(e=>{e.classList.remove("is-valid","is-invalid")})}catch(e){console.error("Form submission error:",e),r.classList.remove("d-none"),r.scrollIntoView({behavior:"smooth",block:"center"})}finally{t.disabled=!1,n.classList.remove("d-none"),o.classList.add("d-none")}}))}window.addEventListener("scroll",function(){const e=window.pageYOffset,t=document.querySelector(".hero-background"),n=document.querySelector(".floating-card");t&&(t.style.transform=`translateY(${.5*e}px)`),n&&(n.style.transform=`translateY(${.3*e}px)`)});!function(){const e=document.createElement("button");e.innerHTML='<i class="fas fa-arrow-up"></i>',e.className="scroll-to-top",e.style.cssText="\n        position: fixed;\n        bottom: 30px;\n        right: 30px;\n        width: 50px;\n        height: 50px;\n        background: var(--gradient-primary);\n        border: none;\n        border-radius: 50%;\n        color: white;\n        font-size: 1.2rem;\n        cursor: pointer;\n        opacity: 0;\n        visibility: hidden;\n        transition: all 0.3s ease;\n        z-index: 1000;\n        box-shadow: var(--shadow-medium);\n    ",document.body.appendChild(e),window.addEventListener("scroll",function(){window.scrollY>300?(e.style.opacity="1",e.style.visibility="visible"):(e.style.opacity="0",e.style.visibility="hidden")}),e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})}),e.addEventListener("mouseenter",function(){this.style.transform="translateY(-3px)",this.style.boxShadow="var(--shadow-heavy)"}),e.addEventListener("mouseleave",function(){this.style.transform="translateY(0)",this.style.boxShadow="var(--shadow-medium)"})}(),function(){const e=document.querySelector(".footer p");if(e){const t=(new Date).getFullYear();e.textContent=`© ${t} Asgar Ali. All rights reserved.`}}(),window.addEventListener("scroll",function(e){let t;return function(...n){clearTimeout(t),t=setTimeout(()=>e(...n),10)}}()(function(){updateActiveNavLink()})),window.addEventListener("load",function(){const e=document.createElement("div");e.className="loading-screen",e.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: var(--dark-color);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        z-index: 9999;\n        transition: opacity 0.5s ease;\n    ",e.innerHTML='\n        <div class="loading-content text-center">\n            <div class="spinner-border text-primary mb-3" role="status">\n                <span class="visually-hidden">Loading...</span>\n            </div>\n            <p class="text-white">Loading Portfolio...</p>\n        </div>\n    ',document.body.appendChild(e),setTimeout(()=>{e.style.opacity="0",setTimeout(()=>{e.remove()},500)},1e3)});